# 今後の開発計画と改善点 (Future Roadmap)

現在のコードベース（フェーズB完了時点）のレビュー結果に基づき、未実装機能、改善が必要な点、および将来の拡張案をまとめました。

## 1. 未実装機能 (Missing Features)

### 管理画面 (Admin UI)
- [x] **主要チェックポイントの編集機能**:
    - 実装完了: 一覧表示、追加、編集、削除（CRUD）が可能になりました。
- [x] **システム設定 (Clinic Config) のUI**:
    - 実装完了: 開院時間、昼休み、タイムライン表示範囲などの設定変更が可能になりました。
- [ ] **並び替え機能**:
    - スタッフやチェックポイントの表示順 (`display_order`) を変更するUIが未実装です。現在は追加順またはDB直接編集に依存しています。

### ダッシュボード (Dashboard)
- [ ] **週間・月間ビュー (Week/Month View)**:
    - 現在は「日次ビュー (Day View)」のみ実装されています。
    - ヒートマップやカレンダー形式での長期的な傾向分析機能が未実装です。
- [ ] **全トイレ俯瞰ビュー**:
    - 現在はプルダウンでトイレを切り替える形式ですが、複数のトイレの状況を一度に確認できるサマリービューがあると便利です。

## 2. 改善・リファクタリング (Improvements)

### バックエンド
- [x] **タイムゾーン処理の堅牢化**:
    - `datetime.now(timezone.utc)` を使用し、DB保存値のタイムゾーン情報を考慮するよう修正しました。これにより `TypeError` は解消されました。
- [ ] **画像パスの処理**:
    - `dashboard.py` 内で `os.path.relpath` を使用してパスを生成していますが、静的ファイル配信の構成と密結合しています。将来的にS3などに移行する場合はロジックの変更が必要です。

### フロントエンド
- [ ] **型定義の共有**:
    - APIレスポンスの型定義が `types.ts` にありますが、バックエンドのPydanticモデルと手動で同期する必要があります。`openapi-typescript` などのツール導入を検討してください。
- [ ] **エラーハンドリングの強化**:
    - ネットワークエラーやAPIエラー時のユーザーへのフィードバック（トースト通知など）をより詳細に行う余地があります。現在は `alert()` やコンソールログが主です。

## 3. バグ・懸念点 (Known Issues)

- **画像ストレージ**: RenderのDiskを使用していますが、永続化ディスクの容量監視や古い画像のアーカイブ/削除ポリシー（現在は無期限保存）について検討が必要です。
- **認証**: Basic認証は簡易的です。セキュリティ要件が高まる場合は、JWTやセッションベースの認証への移行を検討してください。

---

このドキュメントは、次のフェーズ（フェーズC以降）の開発指針として活用してください。

# 今後の開発計画と改善点 (Future Roadmap)

現在のコードベース（フェーズA完了時点）のレビュー結果に基づき、未実装機能、改善が必要な点、および将来の拡張案をまとめました。

## 1. 未実装機能 (Missing Features)

### 管理画面 (Admin UI)
- [ ] **主要チェックポイントの編集機能**:
    - 現在は `JSON.stringify` での表示のみ（Read-Only）です。
    - バックエンドAPIはCRUDをサポートしていますが、フロントエンドに編集・追加・削除のUIがありません。
- [ ] **システム設定 (Clinic Config) のUI**:
    - `architecture.md` で定義されている「開院時間」「昼休み」「タイムライン表示範囲」などの設定画面が未実装です。
    - バックエンドには `ClinicConfig` モデルとAPIが存在しますが、フロントエンドから変更する手段がありません。
- [ ] **並び替え機能**:
    - スタッフやチェックポイントの表示順 (`display_order`) を変更するUIがありません。

### ダッシュボード (Dashboard)
- [ ] **週間・月間ビュー (Week/Month View)**:
    - 現在は「日次ビュー (Day View)」のみ実装されています。
    - ヒートマップやカレンダー形式での長期的な傾向分析機能が未実装です。
- [ ] **全トイレ俯瞰ビュー**:
    - 現在はプルダウンでトイレを切り替える形式ですが、複数のトイレの状況を一度に確認できるサマリービューがあると便利です。

## 2. 改善・リファクタリング (Improvements)

### バックエンド
- [ ] **タイムゾーン処理の堅牢化**:
    - 現在はサーバーのローカル時間や単純な文字列処理に依存している箇所があります。`pytz` や `zoneinfo` を導入し、明示的にJST (Asia/Tokyo) を扱うように統一することを推奨します。
- [ ] **画像パスの処理**:
    - `dashboard.py` 内で画像パスをURLに変換するロジックがハードコード気味です。設定ファイル (`config.py`) を活用し、より柔軟な構造にすべきです。

### フロントエンド
- [ ] **型定義の共有**:
    - APIレスポンスの型定義が `types.ts` にありますが、バックエンドのPydanticモデルと手動で同期する必要があります。`openapi-typescript` などのツール導入を検討してください。
- [ ] **エラーハンドリングの強化**:
    - ネットワークエラーやAPIエラー時のユーザーへのフィードバック（トースト通知など）をより詳細に行う余地があります。

## 3. バグ・懸念点 (Known Issues)

- **画像ストレージ**: RenderのDiskを使用していますが、永続化ディスクの容量監視や古い画像のアーカイブ/削除ポリシー（現在は無期限保存）について検討が必要です。
- **認証**: Basic認証は簡易的です。セキュリティ要件が高まる場合は、JWTやセッションベースの認証への移行を検討してください。

---

このドキュメントは、次のフェーズ（フェーズB以降）の開発指針として活用してください。
